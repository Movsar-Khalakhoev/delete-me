// scroll to top
function scrollToTop(){zenscroll.toY(0)}function toggleScrollUpButton(){var e=window.pageYOffset||document.documentElement.scrollTop,t=document.getElementById("upbutton");!0===scrollDir(e)?t.style.display="none":(t.style.display="block",t.style.opacity=.5)}var scrollDir=function(e){return function(t){var n=t<e;return e=t,n}}();document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),window.addEventListener("scroll",toggleScrollUpButton,{passive:!0});var e=document.getElementById("upbutton");e.addEventListener("click",scrollToTop,!1)},!1);
// toggle details
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var ToggleTip=function(){"use strict";function e(t){var i=this;_classCallCheck(this,e),this.bindOutsideClick=this.clickOutside.bind(this),this.element=t,this.summary=this.element.firstElementChild,this.dialog=this.summary.nextElementSibling,this.triangleSize=getComputedStyle(this.dialog).getPropertyValue("--triangle-size").slice(0,-2)-0,this.dialogWidth=parseInt(window.getComputedStyle(this.dialog).width.replace("px",""),10),this.element.addEventListener("keydown",(function(e){"Escape"===e.key&&i.closeTip()})),this.element.addEventListener("toggle",(function(){i.handleToggle()})),this.summary.addEventListener("blur",(function(){i.closeTip()}))}return _createClass(e,[{key:"clickOutside",value:function(e){this.element.contains(e.target)||this.closeTip()}},{key:"closeTip",value:function(){var e,t=this.element;t.firstElementChild.nextElementSibling;e=setTimeout((function(){t.open=!1,clearTimeout(e)}),430)}},{key:"handleToggle",value:function(){if(this.element.open){this.dialog.removeAttribute("style");this.dialog.getBoundingClientRect();var e=this.summary.getBoundingClientRect().width/2-this.triangleSize;window.innerWidth;this.dialog.style.setProperty("--triangle-offset",`${e}px`);var t=document.documentElement,i=this.summary,n=function(){return window.scrollY||t.scrollTop},l=Math.max(0,function(e){return e.getBoundingClientRect().bottom+n()-t.offsetTop}(i)-60);zenscroll.toY(l,450),document.addEventListener("click",this.bindOutsideClick)}else zenscroll.to(this.summary,550),document.removeEventListener("click",this.bindOutsideClick)}}]),e}();window.addEventListener("pageshow",(function(){document.querySelectorAll("[data-toggletip]").forEach((function(e){return new ToggleTip(e)}))}));
// nightmode
function nightmode_toggle() { if( $("body").hasClass( "dark")) { $("body").removeClass( "dark"); $(".arabic").css("color", "#111"); $(".arabic").css("text-shadow", "#bbbbbb 0px 0.02em 0, #eee 0 -0.05em 0"); $("details dl dt").css("background-color", "#fff"); $(".change").text( "ВЫКЛ."); EasyCache.set("nightmode", "off"); } else { $("body").addClass( "dark"); $(".arabic").css("color", "#fff"); $(".arabic").css("text-shadow", "#100 0px 0.02em 0, #4c4c4c 0 -0.05em 0"); $("details dl dt").css("background-color", "#222"); $(".change").text( "ВКЛ."); EasyCache.set("nightmode", "on"); } } function set_night_mode(state) { if (state == "on") { $("body").addClass( "dark"); $(".arabic").css("color", "#fff"); $(".arabic").css("text-shadow", "#100 0px 0.02em 0, #4c4c4c 0 -0.05em 0"); $("details dl dt").css("background-color", "#222"); $(".change").text( "ВКЛ."); EasyCache.set("nightmode", "on"); } else { $("body").removeClass( "dark"); $(".arabic").css("color", "#111"); $(".arabic").css("text-shadow", "#bbbbbb 0px 0.02em 0, #eee 0 -0.05em 0"); $("details dl dt").css("background-color", "#fff"); $(".change").text( "ВЫКЛ."); EasyCache.set("nightmode", "off"); } } $(".change").on("click", function() { nightmode_toggle(); }); document.addEventListener("DOMContentLoaded",function(){ var nightmode = EasyCache.get("nightmode"); set_night_mode(nightmode); });